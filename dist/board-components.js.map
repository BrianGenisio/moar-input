{"version":3,"file":"board-components.js","sources":["board-components.js","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/1","@traceur/generated/TemplateParser/2"],"names":[],"mappings":"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","sourcesContent":["var componentConfig = require(\"./component-config\");\nvar typeName = require(\"./type-name\");\nvar iterationExtensions = require(\"./iteration-extensions\");\n\nfunction isComponent(value) {\n\treturn typeName(value) in componentConfig;\n}\n\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\nvar ARGUMENT_NAMES = /([^\\s,]+)/g;\n\nfunction getParamNames(func) {\n  var fnStr = func.toString().replace(STRIP_COMMENTS, '')\n  var result = fnStr.slice(fnStr.indexOf('(')+1, fnStr.indexOf(')')).match(ARGUMENT_NAMES)\n  if(result === null)\n     result = []\n  return result\n}\n\nfunction getAction(name, value) {\n\treturn { name, params: getParamNames(value[name]) };\n}\n\nfunction getComponent(name, value) {\n\tvar result = { name, type: typeName(value) };\n\tvar properties = componentConfig[typeName(value)].properties;\n\n\tfor(var property of properties) {\n\t\tresult[property] = value[property]\n\t}\n\n\tif(!result.id) {\n\t\tresult.id = name;\n\t}\n\n\tresult.actions = [ for (name of Object.keys(Object.getPrototypeOf(value))) getAction(name, value) ];\n\n\treturn result;\n}\n\nclass BoardComponents {\n\tconstructor(board) {\n\t\tthis.board = board;\n\t}\n\n\tact(action, component) {\n\t\tthis.board.repl.context[component.name][action]();\n\t\treturn getComponent(component.name, this.board.repl.context[component.name]);\n\t}\n\n\t[Symbol.iterator]() {\n\t\tvar boardContext = this.board.repl.context;\n\n\t\treturn iterationExtensions.arrayIterator(\n\t\t\t[ for (name of Object.keys(boardContext)) \n\t\t\t\t\tif(isComponent(boardContext[name])) \n\t\t\t\t\t\tgetComponent(name, boardContext[name]) ]\n\t\t);\n\t}\n}\n\nmodule.exports = iterationExtensions.extend(BoardComponents);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","\n        for (var $__placeholder__0 =\n                 $__placeholder__1[Symbol.iterator](),\n                 $__placeholder__2;\n             !($__placeholder__3 = $__placeholder__4.next()).done; ) {\n          $__placeholder__5;\n          $__placeholder__6;\n        }","var $__placeholder__0 = 0, $__placeholder__1 = [];","$__placeholder__0[$__placeholder__1++] = $__placeholder__2;","return $__placeholder__0;","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)"]}